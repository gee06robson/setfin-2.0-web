var ne=Object.defineProperty,oe=Object.defineProperties;var ae=Object.getOwnPropertyDescriptors;var K=Object.getOwnPropertySymbols;var ce=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var Q=(a,s,o)=>s in a?ne(a,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[s]=o,b=(a,s)=>{for(var o in s||(s={}))ce.call(s,o)&&Q(a,o,s[o]);if(K)for(var o of K(s))se.call(s,o)&&Q(a,o,s[o]);return a},j=(a,s)=>oe(a,ae(s));import{j as X,a as re,S as P,r as d,u as O,O as Y,L as Z,G as ie,N as le,b as q,f as k,p as A,c as W,$ as w,I as R,s as L,V as de,R as G,d as me,e as S,B as ue,g as pe}from"./vendor.f43e9601.js";const he=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const l of t)if(l.type==="childList")for(const m of l.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&c(m)}).observe(document,{childList:!0,subtree:!0});function o(t){const l={};return t.integrity&&(l.integrity=t.integrity),t.referrerpolicy&&(l.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?l.credentials="include":t.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function c(t){if(t.ep)return;t.ep=!0;const l=o(t);fetch(t.href,l)}};he();const xe="_homeBoxWrapper_16g9p_1",_e="_contentHome_16g9p_12";var ee={homeBoxWrapper:xe,contentHome:_e};const e=X.exports.jsx,n=X.exports.jsxs,ge=()=>e("div",{className:ee.homeBoxWrapper,children:e("div",{className:ee.contentHome})}),De="_loginBoxWrapper_rxcbp_1",ve="_loginContentBox_rxcbp_12",Be="_contentImageBox_rxcbp_20",fe="_contentTitle_rxcbp_30",be="_textMobile_rxcbp_42",Ne="_contentButtonLogin_rxcbp_52",ye="_textWeb_rxcbp_68";var $={loginBoxWrapper:De,loginContentBox:ve,contentImageBox:Be,contentTitle:fe,textMobile:be,contentButtonLogin:Ne,textWeb:ye},Te="/assets/logo.97d8351a.svg";const Ee="_containerLoading_1inio_1",Le="_contentLoading_1inio_14";var te={containerLoading:Ee,contentLoading:Le};const M=()=>e("div",{className:te.containerLoading,children:e("div",{className:te.contentLoading,children:e("span",{className:"animate__animated animate__flash animate__infinite animate__slow",children:"Carregando..."})})}),N=re.create({baseURL:"https://tesourariabpeb.herokuapp.com/"});const z=a=>{if(a)return Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a)},H=a=>{switch(a=a.replaceAll("-",""),a=a.replaceAll(".",""),a=a.replaceAll("/",""),a.length){case 14:return"00.000.000/0000-00";case 11:return"000.000.000-00";case 6:return"000000";default:return"Error!"}},V=a=>(a=a.replace(".",""),a=a.replace(",","."),a),I=a=>{P.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",P.stopTimer),o.addEventListener("mouseleave",P.resumeTimer)}}).fire({icon:"error",title:"Ops' algo deu errado",text:a.response.data.error,position:"top"}),console.log(a.response.data.error)},Ie=(a,s)=>a.reduce((o,c,t)=>{const l=Math.floor(t/s);return o[l]=[...o[l]||[],c],o},[]),U=d.exports.createContext({});function Ce(a){const[s,o]=d.exports.useState(!1),[c,t]=d.exports.useState(null),[l,m]=d.exports.useState(0),x=localStorage.getItem("@financeiro:token");N.defaults.headers.common.Authorization=`Bearer ${x}`;const r=()=>{t(null),localStorage.removeItem("@financeiro:token")},h=()=>{m(l+1),console.log("atualizado")};async function g(B){console.log(B),o(!0);const{credential:i}=B;await N.post("/user",{credential:i}).then(p=>{const{token:_,user:u}=p.data;localStorage.setItem("@financeiro:token",_),N.defaults.headers.common.Authorization=`Bearer ${_}`,t(u),o(!1)}).catch(p=>{o(!1),I(p)})}return d.exports.useEffect(()=>{(async()=>{x&&await N.get("profile").then(i=>{const{data:p}=i;t(p),o(!1)}).catch(i=>{o(!1),I(i)})})()},[localStorage,l]),n(U.Provider,{value:{signIn:g,user:c,signOut:r,updateState:h},children:[s&&e(M,{}),a.children]})}function Fe(a){const[s,o]=d.exports.useState(a?"loading":"idle");return d.exports.useEffect(()=>{if(!a){o("idle");return}let c=document.querySelector(`script[src="${a}"]`);if(c)o(c.getAttribute("data-status")||"idle");else{c=document.createElement("script"),c.src=a,c.async=!0,c.setAttribute("data-status","loading"),document.body.appendChild(c);const l=m=>{!!c&&c.setAttribute("data-status",m.type==="load"?"ready":"error")};c.addEventListener("load",l),c.addEventListener("error",l)}const t=l=>{o(l.type==="load"?"ready":"error")};return c.addEventListener("load",t),c.addEventListener("error",t),()=>{c&&(c.removeEventListener("load",t),c.removeEventListener("error",t))}},[a]),s}const Se=()=>{const{VITE_GOOGLE_CLIENT_ID:a,VITE_GOOGLE_CLIENT_SCRIPT_URL:s,VITE_SCRIPT_FLAG:o}={VITE_GOOGLE_CLIENT_ID:"726684203979-1jbrnptg2rp5qn9t1elfej55r37egj23.apps.googleusercontent.com",VITE_GOOGLE_CLIENT_SCRIPT_URL:"https://accounts.google.com/gsi/client",VITE_SCRIPT_FLAG:"__GoogleOneTapScript__",VITE_API_URL:"https://tesourariabpeb.herokuapp.com/",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0},{signIn:c,user:t}=d.exports.useContext(U),l=s,m=o,x=Fe(l),r=O(),h=g=>typeof g=="object"&&g!==null;return d.exports.useEffect(()=>{(async()=>{!(window==null?void 0:window[m])&&window.google&&x==="ready"&&!h(t)&&(await window.google.accounts.id.initialize({client_id:a,callback:c}),window[m]=!0),(window==null?void 0:window[m])&&x==="ready"&&!h(t)&&(await window.google.accounts.id.renderButton(document.getElementById("buttonDiv"),{theme:"outline",size:"large",shape:"square"}),await window.google.accounts.id.prompt())})()},[x,window==null?void 0:window[m]]),d.exports.useEffect(()=>{h(t)===!0&&r("/financial/home")},[h(t)]),e("div",{className:$.loginBoxWrapper,children:e("div",{className:$.loginContentBox,children:n("div",{className:$.contentImageBox,children:[e("img",{src:Te,alt:"financeiro"}),n("div",{className:$.contentTitle,children:[e("span",{children:"Batalh\xE3o de Pol\xEDcia do Ex\xE9rcito de Bras\xEDlia"}),e("span",{className:$.textWeb,children:"Sistema de G\xEArenciamento de Notas Fiscais e Faturas"}),e("span",{className:$.textMobile,children:"Setor Financeiro"})]}),e("div",{className:$.contentButtonLogin,children:h(t)===!1&&e("div",{id:"buttonDiv"})})]})})})},ke="_documentBoxWrapper_1nlro_1";var Ae={documentBoxWrapper:ke};const we=()=>e("div",{className:Ae.documentBoxWrapper,children:e(Y,{})}),Re="_topBarBoxWrapper_1m0sk_1",Oe="_contentTopBar_1m0sk_12",$e="_contentLogo_1m0sk_17",Me="_contentNavigate_1m0sk_45",Ue="_contentDropDown_1m0sk_51",qe="_contentTitleDropDown_1m0sk_58",Ve="_contentMenuDropDown_1m0sk_70",je="_contentUserAvatar_1m0sk_97",Pe="_cicleAvatarUser_1m0sk_104",We="_contentMenuUserDropDown_1m0sk_117",Ge="_contentUserAvatarDropDown_1m0sk_131",ze="_userNameText_1m0sk_153",He="_contentAdminText_1m0sk_162",Je="_contentMenuUser_1m0sk_117",Ke="_contentCloseButton_1m0sk_198";var f={topBarBoxWrapper:Re,contentTopBar:Oe,contentLogo:$e,contentNavigate:Me,contentDropDown:Ue,contentTitleDropDown:qe,contentMenuDropDown:Ve,contentUserAvatar:je,cicleAvatarUser:Pe,contentMenuUserDropDown:We,contentUserAvatarDropDown:Ge,userNameText:ze,contentAdminText:He,contentMenuUser:Je,contentCloseButton:Ke};const Qe=()=>{const[a,s]=d.exports.useState(!1),[o,c]=d.exports.useState(!1),{user:t,signOut:l}=d.exports.useContext(U);return e("div",{className:f.topBarBoxWrapper,children:n("div",{className:f.contentTopBar,children:[n("div",{className:`${f.contentLogo} animate__animated animate__fadeIn`,children:[(t==null?void 0:t.unity)?e("span",{children:t.unity.name}):e("strong",{className:"animate__animated  animate__flash animate__infinite",children:"carregando"}),e("span",{children:t==null?void 0:t.name})]}),e("div",{className:`${f.contentNavigate} animate__animated animate__fadeIn `,children:n("div",{className:f.contentDropDown,onClick:()=>s(!a),children:[e("div",{className:f.contentTitleDropDown,children:e("span",{children:"Documento"})}),a&&n("div",{className:f.contentMenuDropDown,onMouseLeave:()=>s(!1),children:[e(Z,{to:"/financial/document/new",children:e("span",{children:"Incluir Documento"})}),e(Z,{to:"/financial/document/list",children:e("span",{children:"Listar Documentos"})})]})]})}),(t==null?void 0:t.image_url)&&n("div",{className:f.contentUserAvatar,children:[o===!1&&e("div",{className:`${f.cicleAvatarUser} animate__animated animate__fadeIn`,onClick:()=>c(o===!1),children:e("img",{src:t==null?void 0:t.image_url,alt:t==null?void 0:t.name})}),o&&n("div",{className:`${f.contentMenuUserDropDown} animate__animated animate__bounceInDown`,children:[n("div",{className:f.contentUserAvatarDropDown,children:[e("div",{className:f.cicleAvatarUser,children:e("img",{src:t==null?void 0:t.image_url,alt:t==null?void 0:t.name})}),e("div",{className:f.userNameText,children:e("strong",{children:t.name})})]}),e("div",{className:f.contentAdminText,children:e("strong",{children:"Administrador"})}),e("div",{className:f.contentMenuUser,children:e("button",{type:"button",onClick:()=>l(),children:e("span",{children:"Sair"})})}),e("div",{className:f.contentCloseButton,children:e("button",{type:"button",onClick:()=>c(!1),children:e(ie,{size:18,color:"#312f51"})})})]})]})]})})},Xe="_privateOutlet_1671p_1";var Ye={privateOutlet:Xe};function Ze(){d.exports.useContext(U);const a=localStorage.getItem("@financeiro:token");return n("div",{className:Ye.privateOutlet,children:[e(Qe,{}),a?e(Y,{}):e(le,{to:"/",replace:!0})]})}const et="_contentBoxListDocuments_1o46t_1",tt="_contentTitleListDocuments_1o46t_11",nt="_contentDateDocument_1o46t_47",ot="_contentFilterButtons_1o46t_57",at="_contentListBox_1o46t_81",ct="_contentDocumentList_1o46t_88",st="_cardDocument_1o46t_96",rt="_documentRedirect_1o46t_127",it="_contentCreditor_1o46t_157",lt="_contentBarButtonForm_1o46t_174",dt="_contentFormButtons_1o46t_189";var C={contentBoxListDocuments:et,contentTitleListDocuments:tt,contentDateDocument:nt,contentFilterButtons:ot,contentListBox:at,contentDocumentList:ct,cardDocument:st,documentRedirect:rt,contentCreditor:it,contentBarButtonForm:lt,contentFormButtons:dt};const mt=()=>{const[a,s]=d.exports.useState(!0),[o,c]=d.exports.useState(8),[t,l]=d.exports.useState([]),m=O(),{updateState:x}=d.exports.useContext(U),{handleSubmit:r,register:h,watch:g}=q({defaultValues:{id:[]}}),B=g();d.exports.useEffect(()=>{(async()=>{s(!0),await N.post("/documents",{take:o}).then(_=>{const{data:u}=_;l(u),x(),s(!1)}).catch(_=>{s(!1),I(_)})})()},[o]),d.exports.useEffect(()=>{B.id.length===0&&localStorage.setItem("@financeiro:selectedDocuments",JSON.stringify([])),localStorage.setItem("@financeiro:selectedDocuments",JSON.stringify(B.id))},[B.id]);const i=p=>{const{id:_}=p;localStorage.setItem("@financeiro:selectedDocuments",JSON.stringify(_)),m("/financial/document/extract/")};return n("div",{className:C.contentBoxListDocuments,children:[a&&e(M,{}),n("div",{className:C.contentTitleListDocuments,children:[n("div",{className:C.contentDateDocument,children:[e("h2",{children:"Documentos"}),e("span",{children:"Aqui est\xE3o listados todos os documentos cadastrados em sua subunidade"})]}),n("div",{className:C.contentFilterButtons,children:[e("button",{type:"button",onClick:()=>m("/financial/home"),children:e("span",{children:"in\xEDcio"})}),e("button",{type:"button",onClick:()=>m("/financial/document/new"),children:e("span",{children:"novo documento"})}),e("div",{className:C.contentPaginationBox,children:e("button",{type:"button",onClick:()=>c(o+8),children:n("span",{children:["Mostrando ",t.length," resultados"]})})})]})]}),e("div",{className:C.contentListBox,children:e("div",{className:C.contentDocumentList,children:n("form",{onSubmit:r(i),autoComplete:"off",children:[t==null?void 0:t.map(p=>n("div",{className:C.cardDocument,children:[e("input",j(b({type:"checkbox"},h("id")),{value:p.id})),e("button",{type:"button",className:C.documentRedirect,onClick:()=>m(`/financial/document/success/${p.id}`),children:e("span",{children:p.number})}),n("div",{className:C.contentCreditor,children:[e("span",{children:p.creditor.code}),e("span",{children:p.creditor.name})]}),e("span",{children:k(A(p.emission),"dd/MM/yyyy")}),p.due_date?e("span",{children:k(A(p.due_date),"dd/MM/yyyy")}):e("span",{children:e("i",{children:"n\xE3o h\xE1"})}),e("span",{children:z(p.value)})]},p.id)),B.id.length>0&&n("div",{className:`${C.contentBarButtonForm} animate__animated  animate__fadeInUp`,children:[e("div",{className:C.contentFormButtons,children:e("button",{type:"submit",children:e("span",{children:"Extrato"})})}),e("button",{type:"button",children:e("span",{children:B.id.length})})]})]})})})]})},ut="_formsuccessNewDocumentBox_1ly2a_1",pt="_contentTitle_1ly2a_16",ht="_contentResponseData_1ly2a_35",xt="_contentBoxDataDobleText_1ly2a_43",_t="_contentTextBox_1ly2a_48",gt="_contentText_1ly2a_48",Dt="_contentBoxButton_1ly2a_86",vt="_contentAuthorBox_1ly2a_114",Bt="_contentAuthorTextBox_1ly2a_125",ft="_contentAuthorText_1ly2a_125",bt="_deleteButton_1ly2a_144";var D={formsuccessNewDocumentBox:ut,contentTitle:pt,contentResponseData:ht,contentBoxDataDobleText:xt,contentTextBox:_t,contentText:gt,contentBoxButton:Dt,contentAuthorBox:vt,contentAuthorTextBox:Bt,contentAuthorText:ft,deleteButton:bt};const Nt=()=>{const[a,s]=d.exports.useState(!0),[o,c]=d.exports.useState(null),{id:t}=W(),l=O(),m=async()=>{s(!0),await N.post("/document/delete",{id:t}).then(x=>{console.log(x.data),l(-1)}).catch(x=>{s(!1),I(x)})};return d.exports.useEffect(()=>{(async()=>{await N.get(`/select_document/${t}`).then(r=>{let h=r.data;h.emission=k(A(h.emission),"dd/MM/yyyy"),h.due_date&&(h.due_date=k(A(h.due_date),"dd/MM/yyyy")),c(h),s(!1)}).catch(r=>{s(!1),I(r)})})()},[]),d.exports.useEffect(()=>{w("#code").mask(H)},[]),a?e(M,{}):n("div",{className:D.formsuccessNewDocumentBox,children:[n("div",{className:D.contentTitle,children:[e("h2",{children:"Documento"}),n("span",{children:["Inclua impostos, altere os dados fornecidos, adicione documentos gerados no SIAFI como ",e("strong",{children:"(NS, NP, NE, OB, ...)"})]})]}),n("div",{className:D.contentResponseData,children:[n("div",{className:D.contentTextBox,children:[e("span",{children:"C\xF3digo Credor"}),n("div",{className:D.contentText,children:[e(R,{color:"#4C5948"}),e("span",{id:"code",children:o==null?void 0:o.creditor.code})]})]}),n("div",{className:D.contentTextBox,children:[e("span",{children:"Raz\xE3o Credor"}),n("div",{className:D.contentText,children:[e(R,{color:"#4C5948"}),e("span",{children:o==null?void 0:o.creditor.name})]})]}),n("div",{className:D.contentTextBox,children:[e("span",{children:"N\xFAmero Documento"}),n("div",{className:D.contentText,children:[e(R,{color:"#4C5948"}),e("span",{children:o==null?void 0:o.number})]})]}),n("div",{className:D.contentBoxDataDobleText,children:[n("div",{className:D.contentTextBox,children:[e("span",{children:"Emiss\xE3o"}),n("div",{className:D.contentText,children:[e(R,{color:"#4C5948"}),e("span",{children:o==null?void 0:o.emission})]})]}),(o==null?void 0:o.due_date)&&n("div",{className:D.contentTextBox,children:[e("span",{children:"Vencimento"}),n("div",{className:D.contentText,children:[e(R,{color:"#4C5948"}),e("span",{children:o==null?void 0:o.due_date})]})]})]}),n("div",{className:D.contentTextBox,children:[e("span",{children:"Valor"}),n("div",{className:D.contentText,children:[e(R,{color:"#4C5948"}),e("span",{children:z(o==null?void 0:o.value)})]})]}),n("div",{className:D.contentBoxButton,children:[e("button",{type:"button",onClick:()=>l(-1),children:e("span",{children:"Voltar"})}),e("button",{type:"button",onClick:()=>l(`/financial/document/update/${t}`),children:e("span",{children:"Editar"})}),e("button",{type:"button",onClick:()=>l(`/financial/document/taxes/${t}`),children:e("span",{children:"Impostos"})}),e("button",{type:"button",children:e("span",{children:"DOC SIAFI"})})]})]}),e("div",{className:D.contentAuthorBox,children:e("div",{className:D.contentAuthorTextBox,children:e("div",{className:D.contentAuthorText,children:o==null?void 0:o.units.map(x=>n("span",{children:["Criado em ",e("strong",{children:k(A(x.included_in),"dd/MM/yyyy 'as' HH:mm:ss")})," por ",e("strong",{children:x.user.name})," (",e("strong",{children:x.user.email}),")"]},x.included_in))})})}),e("button",{type:"button",className:D.deleteButton,onClick:()=>m(),children:e("span",{children:"Excluir"})})]})},yt="_formDocumentBox_1uurr_1",Tt="_contentTitleForm_1uurr_15",Et="_contentTitleText_1uurr_21",Lt="_contentInputBox_1uurr_48",It="_contentDoubleInputBox_1uurr_55",Ct="_contentBox_1uurr_62",Ft="_contentButton_1uurr_102";var F={formDocumentBox:yt,contentTitleForm:Tt,contentTitleText:Et,contentInputBox:Lt,contentDoubleInputBox:It,contentBox:Ct,contentButton:Ft};const St=()=>{const[a,s]=d.exports.useState(!1),[o,c]=d.exports.useState(""),{register:t,handleSubmit:l,formState:{errors:m},reset:x,setValue:r}=q(),h=O(),g=i=>{s(!0),i.value=V(i.value),i.due_date===""&&delete i.due_date,N.post("/document",i).then(p=>{const{id:_}=p.data;x(),s(!1),h(`/financial/document/success/${_}`)}).catch(p=>{s(!1),I(p)})};d.exports.useEffect(()=>{w(".value").mask("#.##0,00",{reverse:!0}),w(".date").mask("00/00/0000")},[]);const B=async i=>{s(!0),await N.post("/select_creditor",{code:i}).then(p=>{var u;const{name:_}=p.data;c(""),r("name",_),s(!1),(u=document.getElementById("number"))==null||u.focus()}).catch(p=>{var u;const{data:_}=p.response;c(_.error),r("name",""),s(!1),(u=document.getElementById("name"))==null||u.focus()})};return n("div",{className:F.formDocumentBox,children:[a&&e(M,{}),e("div",{className:F.contentTitleForm,children:n("div",{className:F.contentTitleText,children:[e("h2",{children:"Cadastro de Documentos"}),e("span",{children:"[Nota Fiscal, Fatura]"})]})}),n("form",{onSubmit:l(g),autoComplete:"off",children:[n("div",{className:F.contentInputBox,children:[e("label",{children:"C\xF3digo Credor"}),e("input",j(b({onKeyPress:()=>c("")},t("code",{required:{value:!0,message:"preenchimento obrigat\xF3rio"},pattern:{value:/^[0-9]+$/i,message:"somente n\xFAmeros"},maxLength:{value:14,message:"m\xE1ximo 14 caracteres"},minLength:{value:6,message:"m\xEDnimo 6 caracteres"}})),{onBlur:i=>B(i.target.value)})),e(L,{errors:m,name:"code",render:({message:i})=>e("p",{children:i})})]}),n("div",{className:F.contentInputBox,children:[n("label",{htmlFor:"name",children:["Raz\xE3o Credor ",e("i",{children:o})]}),e("input",b({id:"name"},t("name")))]}),n("div",{className:F.contentInputBox,children:[e("label",{htmlFor:"number",children:"N\xFAmero Documento"}),e("input",b({id:"number"},t("number",{required:{value:!0,message:"preenchimento obrigat\xF3rio"},pattern:{value:/^[0-9]+$/i,message:"somente n\xFAmeros"}}))),e(L,{errors:m,name:"number",render:({message:i})=>e("p",{children:i})})]}),e("div",{className:F.contentInputBox,children:n("div",{className:F.contentDoubleInputBox,children:[n("div",{className:F.contentBox,children:[e("label",{children:"Emiss\xE3o"}),e("input",b({className:"date"},t("emission",{required:{value:!0,message:"preenchimento obrigat\xF3rio"},maxLength:{value:10,message:"m\xE1ximo 10 caracteres"},minLength:{value:10,message:"m\xEDnimo 10 caracteres"}}))),e(L,{errors:m,name:"emission",render:({message:i})=>e("p",{children:i})})]}),n("div",{className:F.contentBox,children:[e("label",{children:"Vencimento"}),e("input",b({className:"date"},t("due_date",{maxLength:{value:10,message:"m\xE1ximo 10 caracteres"},minLength:{value:10,message:"m\xEDnimo 10 caracteres"}}))),e(L,{errors:m,name:"due_date",render:({message:i})=>e("p",{children:i})})]})]})}),n("div",{className:F.contentInputBox,children:[e("label",{children:"Valor"}),e("input",b({className:"value"},t("value",{required:{value:!0,message:"preenchimento obrigat\xF3rio"}}))),e(L,{errors:m,name:"value",render:({message:i})=>e("p",{children:i})})]}),n("div",{className:F.contentButton,children:[e("button",{type:"button",onClick:()=>h(-1),children:e("span",{children:"In\xEDcio"})}),e("button",{type:"submit",children:e("span",{children:"Cadastrar"})})]})]})]})},kt="_formDocumentBox_ki8s5_1",At="_contentTitleForm_ki8s5_15",wt="_contentTextBox_ki8s5_42",Rt="_contentText_ki8s5_42",Ot="_contentInputBox_ki8s5_79",$t="_contentDoubleInputBox_ki8s5_86",Mt="_contentBox_ki8s5_92",Ut="_contentBoxButton_ki8s5_150";var T={formDocumentBox:kt,contentTitleForm:At,contentTextBox:wt,contentText:Rt,contentInputBox:Ot,contentDoubleInputBox:$t,contentBox:Mt,contentBoxButton:Ut};const qt=()=>{const{id:a}=W(),s=O(),[o,c]=d.exports.useState(!0),[t,l]=d.exports.useState(null),{register:m,handleSubmit:x,formState:{errors:r},reset:h,setValue:g}=q({defaultValues:{id:a}});d.exports.useEffect(()=>{(async()=>{await N.get(`/select_document/${a}`).then(p=>{let _=p.data;_.emission=k(A(_.emission),"dd/MM/yyyy"),_.due_date&&(_.due_date=k(A(_.due_date),"dd/MM/yyyy"),g("due_date",_.due_date)),l(_),g("number",_.number),g("emission",_.emission),g("value",Intl.NumberFormat("pt-BR",{minimumFractionDigits:2}).format(Number(_.value))),c(!1)}).catch(p=>{c(!1),I(p)})})()},[]);const B=async i=>{c(!0),i.value=V(i.value),i.due_date===""&&(i.due_date=null),await N.post("/document/update",i).then(()=>{h(),c(!1),s(-1)}).catch(p=>{c(!1),I(p)})};return d.exports.useEffect(()=>{w(".value").mask("#.##0,00",{reverse:!0}),w(".date").mask("00/00/0000"),w("#code").mask(H)}),n("div",{className:T.formDocumentBox,children:[o&&e(M,{}),n("div",{className:T.contentTitleForm,children:[e("h2",{children:"Alterar Documento"}),e("span",{children:"Edi\xE7\xE3o de documento"})]}),n("form",{onSubmit:x(B),autoComplete:"off",children:[n("div",{className:T.contentTextBox,children:[e("span",{children:"C\xF3digo Credor"}),n("div",{className:T.contentText,children:[e(R,{color:"#4C5948"}),e("span",{id:"code",children:t==null?void 0:t.creditor.code})]})]}),n("div",{className:T.contentTextBox,children:[e("span",{children:"Raz\xE3o Credor"}),n("div",{className:T.contentText,children:[e(R,{color:"#4C5948"}),e("span",{children:t==null?void 0:t.creditor.name})]})]}),n("div",{className:T.contentInputBox,children:[e("label",{htmlFor:"number",children:"N\xFAmero Documento"}),e("input",b({id:"number"},m("number",{required:{value:!0,message:"preenchimento obrigat\xF3rio"},pattern:{value:/^[0-9]+$/i,message:"somente n\xFAmeros"}}))),e(L,{errors:r,name:"number",render:({message:i})=>e("p",{children:i})})]}),e("div",{className:T.contentInputBox,children:n("div",{className:T.contentDoubleInputBox,children:[n("div",{className:T.contentBox,children:[e("label",{children:"Emiss\xE3o"}),e("input",b({className:"date"},m("emission",{required:{value:!0,message:"preenchimento obrigat\xF3rio"},maxLength:{value:10,message:"m\xE1ximo 10 caracteres"},minLength:{value:10,message:"m\xEDnimo 10 caracteres"}}))),e(L,{errors:r,name:"emission",render:({message:i})=>e("p",{children:i})})]}),n("div",{className:T.contentBox,children:[e("label",{children:"Vencimento"}),e("input",b({className:"date"},m("due_date",{maxLength:{value:10,message:"m\xE1ximo 10 caracteres"},minLength:{value:10,message:"m\xEDnimo 10 caracteres"}}))),e(L,{errors:r,name:"due_date",render:({message:i})=>e("p",{children:i})})]})]})}),n("div",{className:T.contentInputBox,children:[e("label",{children:"Valor"}),e("input",b({className:"value"},m("value",{required:{value:!0,message:"preenchimento obrigat\xF3rio"}}))),e(L,{errors:r,name:"value",render:({message:i})=>e("p",{children:i})})]}),n("div",{className:T.contentBoxButton,children:[e("button",{type:"submit",children:e("span",{children:"Confirmar"})}),e("button",{type:"button",onClick:()=>s(-1),children:e("span",{children:"Voltar"})})]})]})]})},Vt="_contentAlertExtractEmpty_goicl_1",jt="_contentPageExtract_goicl_37",Pt="_cardDocument_goicl_46",Wt="_contentDataCreditorDocument_goicl_62",Gt="_textCreditorData_goicl_69",zt="_contentDataDocument_goicl_96",Ht="_textDocumentData_goicl_103",Jt="_tableTaxesOnDocument_goicl_120",Kt="_textLiq_goicl_130",Qt="_textTotal_goicl_133";var y={contentAlertExtractEmpty:Vt,contentPageExtract:jt,cardDocument:Pt,contentDataCreditorDocument:Wt,textCreditorData:Gt,break:"_break_goicl_84",contentDataDocument:zt,textDocumentData:Ht,tableTaxesOnDocument:Jt,textLiq:Kt,textTotal:Qt};const Xt=()=>{const[a,s]=d.exports.useState(!0),[o,c]=d.exports.useState([]),t=JSON.parse(localStorage.getItem("@financeiro:selectedDocuments")),l=O();return d.exports.useEffect(()=>{(async()=>{await N.post("/documents/filter",{id_documents:t}).then(x=>{const{data:r}=x;c(r),s(!1)}).catch(x=>{s(!1),I(x)})})()},[]),d.exports.useEffect(()=>{w(".code").mask(H)},[o]),n("div",{children:[a&&e(M,{}),t.length===0&&n("div",{className:y.contentAlertExtractEmpty,children:[e(de,{size:48,color:"#915ce6"}),e("h2",{children:"Aten\xE7\xE3o"}),e("h3",{children:"Selecione os documentos para impress\xE3o do extrato"}),e("button",{type:"button",onClick:()=>l("/financial/document/list"),children:e("span",{children:"Documentos"})})]}),Ie(o,8).map((m,x)=>e("div",{className:y.contentPageExtract,children:m.map(r=>n("div",{className:y.cardDocument,onClick:()=>l(`/financial/document/success/${r.id}`),children:[e("div",{className:y.contentDataCreditorDocument,children:n("div",{className:y.textCreditorData,children:[e("span",{children:r.creditor.name}),e("span",{className:"code",children:r.creditor.code})]})}),e("div",{className:y.break}),n("div",{className:y.contentDataDocument,children:[n("div",{className:y.textDocumentData,children:[e("span",{children:"N\xFAmero"}),e("span",{children:r.number})]}),n("div",{className:y.textDocumentData,children:[e("span",{children:"Emiss\xE3o"}),e("span",{children:k(A(r.emission),"dd/MM/yyyy")})]}),r.due_date&&n("div",{className:y.textDocumentData,children:[e("span",{children:"Vencimento"}),e("span",{children:k(A(r.due_date),"dd/MM/yyyy")})]}),n("div",{className:y.textDocumentData,children:[e("span",{children:"Valor"}),e("span",{children:z(r.value)})]})]}),r.taxes&&r.taxes.length>0&&n("table",{className:y.tableTaxesOnDocument,children:[e("thead",{children:n("tr",{children:[e("th",{className:"bold",children:"C\xF3d"}),e("th",{className:"bold",children:"%"}),e("th",{className:"bold",children:"Calc"}),e("th",{className:"bold",children:"Valor"})]})}),n("tbody",{children:[r.taxes.map(h=>n("tr",{children:[e("td",{children:h.code}),e("td",{children:Intl.NumberFormat("pt-BR",{style:"percent",minimumFractionDigits:2}).format(h.p_a/100)}),n("td",{children:[" ",Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(h.calculation_basis)]}),e("td",{children:Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(h.amount)})]},h.amount)),n("tr",{className:y.textTotal,children:[e("td",{colSpan:2,children:"Total"}),e("td",{colSpan:2,children:(r==null?void 0:r.taxes)&&Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(r==null?void 0:r.taxes.reduce((h,g)=>h+=+g.amount,0))})]}),n("tr",{className:y.textLiq,children:[e("td",{colSpan:2,children:"L\xEDquido"}),e("td",{colSpan:2,children:Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(r.value-(r==null?void 0:r.taxes.reduce((h,g)=>h+=+g.amount,0)))})]})]})]})]},r.id))},x))]})},Yt="_contentBoxTaxesOnDocument_jp2gq_1",Zt="_contentTitleForm_jp2gq_16",en="_contentTitle_jp2gq_16",tn="_contentDataDocument_jp2gq_42",nn="_boxCreditor_jp2gq_52",on="_toBreak_jp2gq_57",an="_boxDocument_jp2gq_63",cn="_contentTaxesData_jp2gq_83",sn="_contentBoxData_jp2gq_123",rn="_contentTotal_jp2gq_148",ln="_contentFormTaxes_jp2gq_163",dn="_contentTaxesBoxInputs_jp2gq_180",mn="_contentInputBox_jp2gq_186",un="_contentBoxButton_jp2gq_246";var v={contentBoxTaxesOnDocument:Yt,contentTitleForm:Zt,contentTitle:en,contentDataDocument:tn,boxCreditor:nn,toBreak:on,boxDocument:an,contentTaxesData:cn,contentBoxData:sn,contentTotal:rn,contentFormTaxes:ln,contentTaxesBoxInputs:dn,contentInputBox:mn,contentBoxButton:un};const pn=()=>{const{id:a}=W(),s=O(),[o,c]=d.exports.useState(!0),[t,l]=d.exports.useState(null),[m,x]=d.exports.useState(0),{register:r,handleSubmit:h,formState:{errors:g},reset:B,setValue:i}=q({defaultValues:{document_id:a}});d.exports.useEffect(()=>{c(!0),(async()=>{await N.get(`/select_document/${a}`).then(E=>{const{data:J}=E;l(J),i("calculation_basis",Intl.NumberFormat("pt-BR",{minimumFractionDigits:2}).format(J.value)),c(!1)}).catch(E=>{c(!1),I(E)})})()},[m]),d.exports.useEffect(()=>{w(".value").mask("#.##0,00",{reverse:!0})});const p=async u=>{c(!0),u.p_a=V(u.p_a),u.calculation_basis=V(u.calculation_basis),console.log(u.calculation_basis),await N.post("/taxes/document",u).then(()=>{B(),x(m+1),c(!1)}).catch(E=>{c(!1),x(m+1),I(E)})},_=async u=>{c(!0),await N.post("/taxe/remove/document",u).then(E=>{B(),x(m+1),c(!1)}).catch(E=>{c(!1),I(E)})};return n("div",{className:v.contentBoxTaxesOnDocument,children:[o&&e(M,{}),e("div",{className:v.contentTitleForm,children:n("div",{className:v.contentTitle,children:[e("h2",{children:"Gerir Documento"}),e("span",{children:"Dedu\xE7\xF5es | Descontos | Acr\xE9scimos"})]})}),n("div",{className:v.contentDataDocument,children:[n("div",{className:v.boxCreditor,children:[e("p",{children:t==null?void 0:t.creditor.name}),e("p",{children:t==null?void 0:t.creditor.code})]}),e("div",{className:v.toBreak}),n("div",{className:v.boxDocument,children:[n("p",{children:[e("span",{children:"Documento"})," ",t==null?void 0:t.number]}),n("p",{children:[e("span",{children:"Valor"})," ",(t==null?void 0:t.value)&&Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t==null?void 0:t.value)]}),e("p",{children:(t==null?void 0:t.taxes)&&t.taxes.length>0&&n(G.Fragment,{children:[e("span",{children:"L\xEDquido"}),e("span",{children:Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t.value-(t==null?void 0:t.taxes.reduce((u,E)=>u+=+E.amount,0)))})]})})]})]}),(t==null?void 0:t.taxes)&&t.taxes.length>0&&n("div",{className:v.contentTaxesData,children:[n("div",{className:v.contentTitle,children:[e("span",{children:"C\xF3digo"}),e("span",{children:"%"}),e("span",{children:"C\xE1lculo"}),e("span",{children:"Total"})]}),e("div",{className:v.contentBoxData,children:t==null?void 0:t.taxes.map(u=>n("div",{onClick:()=>_({document_id:u.document_id,taxe_id:u.taxe_id}),children:[e("span",{children:u.code}),e("span",{children:Intl.NumberFormat("pt-BR",{style:"percent",minimumFractionDigits:2}).format(u.p_a/100)}),e("span",{children:Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(u.calculation_basis)}),e("span",{children:Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(u.amount)})]},u.amount))}),n("div",{className:v.contentTotal,children:[e("span",{children:"Total"}),e("span",{children:(t==null?void 0:t.taxes)&&Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t==null?void 0:t.taxes.reduce((u,E)=>u+=+E.amount,0))})]})]}),e("div",{className:v.contentFormTaxes,children:n("form",{onSubmit:h(p),autoComplete:"off",children:[n("div",{className:v.contentTaxesBoxInputs,children:[n("div",{className:v.contentInputBox,children:[e("label",{children:"C\xF3digo de Recolhimento DARF/DAR"}),e("input",b({},r("code",{required:{value:!0,message:"preenchimento obrigat\xF3rio"},minLength:{value:4,message:"4 caracteres"},maxLength:{value:4,message:"4 caracteres"}}))),e(L,{errors:g,name:"code",render:({message:u})=>e("p",{children:u})})]}),n("div",{className:v.contentInputBox,children:[e("label",{children:"Percentual Aplicado"}),e("input",b({className:"value"},r("p_a",{required:{value:!0,message:"preenchimento obrigat\xF3rio"},maxLength:{value:6,message:"6 caracteres ex: 100,00%"}}))),e(L,{errors:g,name:"p_a",render:({message:u})=>e("p",{children:u})})]})]}),n("div",{className:v.contentInputBox,children:[e("label",{children:"Base de C\xE1lculo"}),e("input",b({className:"value"},r("calculation_basis",{required:{value:!0,message:"preenchimento obrigat\xF3rio"}}))),e(L,{errors:g,name:"calculation_basis",render:({message:u})=>e("p",{children:u})})]}),n("div",{className:v.contentBoxButton,children:[e("button",{type:"button",onClick:()=>s(-1),children:e("span",{children:"VOLTAR"})}),e("button",{type:"submit",children:e("span",{children:"CADASTRAR"})})]})]})})]})},hn=()=>n(me,{children:[e(S,{path:"/",element:e(Se,{})}),n(S,{path:"/financial",element:e(Ze,{}),children:[e(S,{path:"home",element:e(ge,{})}),n(S,{path:"document",element:e(we,{}),children:[e(S,{path:"new",element:e(St,{})}),e(S,{path:"success/:id",element:e(Nt,{})}),e(S,{path:"update/:id",element:e(qt,{})}),e(S,{path:"list",element:e(mt,{})}),e(S,{path:"taxes/:id",element:e(pn,{})}),e(S,{path:"extract",element:e(Xt,{})})]})]})]}),xn=()=>e(G.Fragment,{children:e(ue,{children:e(hn,{})})});pe.render(e(G.StrictMode,{children:e(Ce,{children:e(xn,{})})}),document.getElementById("root"));
