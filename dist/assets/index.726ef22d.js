var ce=Object.defineProperty,se=Object.defineProperties;var re=Object.getOwnPropertyDescriptors;var Y=Object.getOwnPropertySymbols;var ie=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;var Z=(a,s,o)=>s in a?ce(a,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[s]=o,f=(a,s)=>{for(var o in s||(s={}))ie.call(s,o)&&Z(a,o,s[o]);if(Y)for(var o of Y(s))le.call(s,o)&&Z(a,o,s[o]);return a},W=(a,s)=>se(a,re(s));import{j as ee,u as M,a as de,S as J,r as d,O as te,L as ne,G as ue,N as me,b as G,V as he,f as w,p as A,c as K,$,I as q,s as C,d as pe,R as Q,e as xe,g as R,B as _e,h as ge}from"./vendor.54dac895.js";const ve=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const l of t)if(l.type==="childList")for(const m of l.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&c(m)}).observe(document,{childList:!0,subtree:!0});function o(t){const l={};return t.integrity&&(l.integrity=t.integrity),t.referrerpolicy&&(l.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?l.credentials="include":t.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function c(t){if(t.ep)return;t.ep=!0;const l=o(t);fetch(t.href,l)}};ve();const De="_homeBoxWrapper_rtr3q_1",Be="_contentHome_rtr3q_11",fe="_contentCard_rtr3q_18",be="_card_rtr3q_25",Ne="_contentButton_rtr3q_61";var V={homeBoxWrapper:De,contentHome:Be,contentCard:fe,card:be,contentButton:Ne};const e=ee.exports.jsx,n=ee.exports.jsxs,ye=()=>{const a=M();return e("div",{className:V.homeBoxWrapper,children:e("div",{className:V.contentHome,children:e("div",{className:V.contentCard,children:n("div",{className:V.card,children:[e("h1",{children:"Documento"}),n("div",{className:V.contentButton,children:[e("button",{type:"button",onClick:()=>a("/financial/document/new"),children:e("span",{children:"Cadastrar"})}),e("button",{type:"button",onClick:()=>a("/financial/document/list"),children:e("span",{children:"Listar"})})]})]})})})})},Te="_loginBoxWrapper_rxcbp_1",Ee="_loginContentBox_rxcbp_12",Le="_contentImageBox_rxcbp_20",Ce="_contentTitle_rxcbp_30",Ie="_textMobile_rxcbp_42",Fe="_contentButtonLogin_rxcbp_52",Se="_textWeb_rxcbp_68";var O={loginBoxWrapper:Te,loginContentBox:Ee,contentImageBox:Le,contentTitle:Ce,textMobile:Ie,contentButtonLogin:Fe,textWeb:Se},we="/assets/logo.97d8351a.svg";const Ae="_containerLoading_1rxej_1",Re="_contentLoading_1rxej_14";var oe={containerLoading:Ae,contentLoading:Re};const U=()=>e("div",{className:oe.containerLoading,children:e("div",{className:oe.contentLoading,children:e("span",{className:"animate__animated animate__flash animate__infinite animate__slow",children:"Carregando..."})})}),N=de.create({baseURL:"http://localhost:4000"});const z=a=>{if(a)return Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a)},X=a=>{switch(a=a.replaceAll("-",""),a=a.replaceAll(".",""),a=a.replaceAll("/",""),a.length){case 14:return"00.000.000/0000-00";case 11:return"000.000.000-00";case 6:return"000000";default:return"Error!"}},H=a=>(a=a.replace(".",""),a=a.replace(",","."),a),I=a=>{J.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",J.stopTimer),o.addEventListener("mouseleave",J.resumeTimer)}}).fire({icon:"error",title:"Ops' algo deu errado",text:a.response.data.error,position:"top"}),console.log(a.response.data.error)},ke=(a,s)=>a.reduce((o,c,t)=>{const l=Math.floor(t/s);return o[l]=[...o[l]||[],c],o},[]),j=d.exports.createContext({});function Me(a){const[s,o]=d.exports.useState(!1),[c,t]=d.exports.useState(null),[l,m]=d.exports.useState(0),p=localStorage.getItem("@financeiro:token");N.defaults.headers.common.Authorization=`Bearer ${p}`;const r=()=>{t(null),localStorage.removeItem("@financeiro:token")},h=()=>{m(l+1)};async function _(S){o(!0);const{credential:i}=S;await N.post("/user",{credential:i}).then(g=>{const{token:v,user:u}=g.data;localStorage.setItem("@financeiro:token",v),N.defaults.headers.common.Authorization=`Bearer ${v}`,t(u),o(!1)}).catch(g=>{o(!1),I(g)})}return d.exports.useEffect(()=>{(async()=>{p&&await N.get("profile").then(i=>{const{data:g}=i;t(g),o(!1)}).catch(i=>{o(!1),I(i)})})()},[localStorage,l]),n(j.Provider,{value:{signIn:_,user:c,signOut:r,updateState:h},children:[s&&e(U,{}),a.children]})}function $e(a){const[s,o]=d.exports.useState(a?"loading":"idle");return d.exports.useEffect(()=>{if(!a){o("idle");return}let c=document.querySelector(`script[src="${a}"]`);if(c)o(c.getAttribute("data-status")||"idle");else{c=document.createElement("script"),c.src=a,c.async=!0,c.setAttribute("data-status","loading"),document.body.appendChild(c);const l=m=>{!!c&&c.setAttribute("data-status",m.type==="load"?"ready":"error")};c.addEventListener("load",l),c.addEventListener("error",l)}const t=l=>{o(l.type==="load"?"ready":"error")};return c.addEventListener("load",t),c.addEventListener("error",t),()=>{c&&(c.removeEventListener("load",t),c.removeEventListener("error",t))}},[a]),s}const qe=()=>{const{VITE_GOOGLE_CLIENT_ID:a,VITE_GOOGLE_CLIENT_SCRIPT_URL:s,VITE_SCRIPT_FLAG:o}={VITE_GOOGLE_CLIENT_ID:"726684203979-1jbrnptg2rp5qn9t1elfej55r37egj23.apps.googleusercontent.com",VITE_GOOGLE_CLIENT_SCRIPT_URL:"https://accounts.google.com/gsi/client",VITE_SCRIPT_FLAG:"__GoogleOneTapScript__",VITE_API_URL:"http://localhost:4000",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0},{signIn:c,user:t}=d.exports.useContext(j),l=s,m=o,p=$e(l),r=M(),h=_=>typeof _=="object"&&_!==null;return d.exports.useEffect(()=>{(async()=>{!(window==null?void 0:window[m])&&window.google&&p==="ready"&&!h(t)&&(await window.google.accounts.id.initialize({client_id:a,callback:c}),window[m]=!0),(window==null?void 0:window[m])&&p==="ready"&&!h(t)&&(await window.google.accounts.id.renderButton(document.getElementById("buttonDiv"),{theme:"outline",size:"large",shape:"square"}),h(t)===!1&&await window.google.accounts.id.prompt())})()},[p,window==null?void 0:window[m]]),d.exports.useEffect(()=>{h(t)===!0&&r("/financial/home")},[h(t)]),e("div",{className:O.loginBoxWrapper,children:e("div",{className:O.loginContentBox,children:n("div",{className:O.contentImageBox,children:[e("img",{src:we,alt:"financeiro"}),n("div",{className:O.contentTitle,children:[e("span",{children:"Batalh\xE3o de Pol\xEDcia do Ex\xE9rcito de Bras\xEDlia"}),e("span",{className:O.textWeb,children:"Sistema de G\xEArenciamento de Notas Fiscais e Faturas"}),e("span",{className:O.textMobile,children:"Setor Financeiro"})]}),e("div",{className:O.contentButtonLogin,children:h(t)===!1&&e("div",{id:"buttonDiv"})})]})})})},Oe="_documentBoxWrapper_1nlro_1";var Ue={documentBoxWrapper:Oe};const Ve=()=>e("div",{className:Ue.documentBoxWrapper,children:e(te,{})}),je="_topBarBoxWrapper_aavu6_1",Pe="_contentTopBar_aavu6_12",We="_contentLogo_aavu6_17",Ge="_contentNavigate_aavu6_45",ze="_contentDropDown_aavu6_51",He="_contentTitleDropDown_aavu6_58",Je="_contentMenuDropDown_aavu6_70",Ke="_contentUserAvatar_aavu6_97",Qe="_cicleAvatarUser_aavu6_104",Xe="_contentMenuUserDropDown_aavu6_117",Ye="_contentUserAvatarDropDown_aavu6_131",Ze="_userNameText_aavu6_153",et="_contentAdminText_aavu6_162",tt="_contentMenuUser_aavu6_117",nt="_contentCloseButton_aavu6_198";var b={topBarBoxWrapper:je,contentTopBar:Pe,contentLogo:We,contentNavigate:Ge,contentDropDown:ze,contentTitleDropDown:He,contentMenuDropDown:Je,contentUserAvatar:Ke,cicleAvatarUser:Qe,contentMenuUserDropDown:Xe,contentUserAvatarDropDown:Ye,userNameText:Ze,contentAdminText:et,contentMenuUser:tt,contentCloseButton:nt};const ot=()=>{const[a,s]=d.exports.useState(!1),[o,c]=d.exports.useState(!1),{user:t,signOut:l}=d.exports.useContext(j);return e("div",{className:b.topBarBoxWrapper,children:n("div",{className:b.contentTopBar,children:[n("div",{className:`${b.contentLogo} animate__animated animate__fadeIn`,children:[(t==null?void 0:t.unity)?e("span",{children:t.unity.name}):e("strong",{className:"animate__animated  animate__flash animate__infinite",children:"carregando"}),e("span",{children:t==null?void 0:t.name})]}),e("div",{className:`${b.contentNavigate} animate__animated animate__fadeIn `,children:n("div",{className:b.contentDropDown,onClick:()=>s(!a),children:[e("div",{className:b.contentTitleDropDown,children:e("span",{children:"Documento"})}),a&&n("div",{className:b.contentMenuDropDown,onMouseLeave:()=>s(!1),children:[e(ne,{to:"/financial/document/new",children:e("span",{children:"Incluir Documento"})}),e(ne,{to:"/financial/document/list",children:e("span",{children:"Listar Documentos"})})]})]})}),(t==null?void 0:t.image_url)&&n("div",{className:b.contentUserAvatar,children:[o===!1&&e("div",{className:`${b.cicleAvatarUser} animate__animated animate__fadeIn`,onClick:()=>c(o===!1),children:e("img",{src:t==null?void 0:t.image_url,alt:t==null?void 0:t.name})}),o&&n("div",{className:`${b.contentMenuUserDropDown} animate__animated animate__bounceInDown`,children:[n("div",{className:b.contentUserAvatarDropDown,children:[e("div",{className:b.cicleAvatarUser,children:e("img",{src:t==null?void 0:t.image_url,alt:t==null?void 0:t.name})}),e("div",{className:b.userNameText,children:e("strong",{children:t.name})})]}),e("div",{className:b.contentAdminText,children:e("strong",{children:"Administrador"})}),e("div",{className:b.contentMenuUser,children:e("button",{type:"button",onClick:()=>l(),children:e("span",{children:"Sair"})})}),e("div",{className:b.contentCloseButton,children:e("button",{type:"button",onClick:()=>c(!1),children:e(ue,{size:18,color:"#312f51"})})})]})]})]})})},at="_privateOutlet_1671p_1";var ct={privateOutlet:at};function st(){d.exports.useContext(j);const a=localStorage.getItem("@financeiro:token");return n("div",{className:ct.privateOutlet,children:[e(ot,{}),a?e(te,{}):e(me,{to:"/",replace:!0})]})}const rt="_contentBoxListDocuments_xgetx_1",it="_contentTitleListDocuments_xgetx_13",lt="_contentDateDocument_xgetx_25",dt="_contentFilterButtons_xgetx_41",ut="_contentListBox_xgetx_93",mt="_contentDocumentList_xgetx_101",ht="_cardDocument_xgetx_109",pt="_documentRedirect_xgetx_143",xt="_contentCreditor_xgetx_171",_t="_contentBarButtonForm_xgetx_188",gt="_contentFormButtons_xgetx_203";var T={contentBoxListDocuments:rt,contentTitleListDocuments:it,contentDateDocument:lt,contentFilterButtons:dt,contentListBox:ut,contentDocumentList:mt,cardDocument:ht,documentRedirect:pt,contentCreditor:xt,contentBarButtonForm:_t,contentFormButtons:gt};const vt=()=>{const[a,s]=d.exports.useState(!0),[o,c]=d.exports.useState(8),[t,l]=d.exports.useState([]),[m,p]=d.exports.useState([]),r=M(),{updateState:h}=d.exports.useContext(j),[_,S]=d.exports.useState(""),{handleSubmit:i,register:g,watch:v}=G({defaultValues:{id:[]}}),u=v();d.exports.useEffect(()=>{(async()=>{s(!0),await N.post("/documents",{take:o}).then(k=>{const{data:ae}=k;l(ae),h(),s(!1)}).catch(k=>{s(!1),I(k)})})()},[o]),d.exports.useEffect(()=>{u.id.length===0&&localStorage.setItem("@financeiro:selectedDocuments",JSON.stringify([])),localStorage.setItem("@financeiro:selectedDocuments",JSON.stringify(u.id))},[u.id]);const y=x=>{const{id:k}=x;localStorage.setItem("@financeiro:selectedDocuments",JSON.stringify(k)),r("/financial/document/extract/")},P=function(x){S(x),console.log(console.log(x)),_.length>0&&(p(t.filter(k=>k.searchEngine.includes(_))),console.log(t.filter(k=>k.searchEngine.includes(_))))};return n("div",{className:T.contentBoxListDocuments,children:[a&&e(U,{}),n("div",{className:T.contentTitleListDocuments,children:[n("div",{className:T.contentDateDocument,children:[e("h2",{children:"Documentos"}),e("span",{children:"Aqui est\xE3o listados todos os documentos cadastrados em sua subunidade"})]}),n("div",{className:T.contentFilterButtons,children:[e("button",{type:"button",onClick:()=>r("/financial/home"),children:e("span",{children:"in\xEDcio"})}),e("button",{type:"button",onClick:()=>r("/financial/document/new"),children:e("span",{children:"novo documento"})}),n("button",{type:"button",children:[e("span",{children:"Mostrando"}),n("strong",{children:[t.length," "]}),e("span",{children:"resultados"})]}),n("button",{type:"button",onClick:()=>c(o+8),children:[e(he,{size:20}),e("span",{children:"Mostrar mais"})]})]}),e("input",{type:"text",onChange:x=>P(x.target.value.toUpperCase()),value:_,autoComplete:"off",placeholder:"Buscar"})]}),e("div",{className:T.contentListBox,children:e("div",{className:T.contentDocumentList,children:n("form",{onSubmit:i(y),autoComplete:"off",children:[_.length>0?m==null?void 0:m.map(x=>n("div",{className:T.cardDocument,children:[e("input",W(f({type:"checkbox"},g("id")),{value:x.id})),e("button",{type:"button",className:T.documentRedirect,onClick:()=>r(`/financial/document/success/${x.id}`),children:e("span",{children:x.number})}),n("div",{className:T.contentCreditor,children:[e("span",{children:x.creditor.code}),e("span",{children:x.creditor.name})]}),n("span",{children:[e("strong",{children:"Emiss\xE3o "}),w(A(x.emission),"dd/MM/yyyy")]}),x.due_date?n("span",{children:[e("strong",{children:"Vencimento "}),w(A(x.due_date),"dd/MM/yyyy")]}):n("span",{children:[e("strong",{children:"Vencimento "}),e("i",{children:"n\xE3o h\xE1"})]}),n("span",{children:[e("strong",{children:"Valor "}),z(x.value)]})]},x.id)):t==null?void 0:t.map(x=>n("div",{className:T.cardDocument,children:[e("input",W(f({type:"checkbox"},g("id")),{value:x.id})),e("button",{type:"button",className:T.documentRedirect,onClick:()=>r(`/financial/document/success/${x.id}`),children:e("span",{children:x.number})}),n("div",{className:T.contentCreditor,children:[e("span",{children:x.creditor.code}),e("span",{children:x.creditor.name})]}),n("span",{children:[e("strong",{children:"Emiss\xE3o "}),w(A(x.emission),"dd/MM/yyyy")]}),x.due_date?n("span",{children:[e("strong",{children:"Vencimento "}),w(A(x.due_date),"dd/MM/yyyy")]}):n("span",{children:[e("strong",{children:"Vencimento "}),e("i",{children:"n\xE3o h\xE1"})]}),n("span",{children:[e("strong",{children:"Valor "}),z(x.value)]})]},x.id)),u.id.length>0&&n("div",{className:`${T.contentBarButtonForm} animate__animated  animate__fadeInUp`,children:[e("div",{className:T.contentFormButtons,children:e("button",{type:"submit",children:e("span",{children:"Extrato"})})}),e("button",{type:"button",children:e("span",{children:u.id.length})})]})]})})})]})},Dt="_formsuccessNewDocumentBox_1ly2a_1",Bt="_contentTitle_1ly2a_16",ft="_contentResponseData_1ly2a_35",bt="_contentBoxDataDobleText_1ly2a_43",Nt="_contentTextBox_1ly2a_48",yt="_contentText_1ly2a_48",Tt="_contentBoxButton_1ly2a_86",Et="_contentAuthorBox_1ly2a_114",Lt="_contentAuthorTextBox_1ly2a_125",Ct="_contentAuthorText_1ly2a_125",It="_deleteButton_1ly2a_144";var D={formsuccessNewDocumentBox:Dt,contentTitle:Bt,contentResponseData:ft,contentBoxDataDobleText:bt,contentTextBox:Nt,contentText:yt,contentBoxButton:Tt,contentAuthorBox:Et,contentAuthorTextBox:Lt,contentAuthorText:Ct,deleteButton:It};const Ft=()=>{const[a,s]=d.exports.useState(!0),[o,c]=d.exports.useState(null),{id:t}=K(),l=M(),m=async()=>{s(!0),await N.post("/document/delete",{id:t}).then(p=>{console.log(p.data),l(-1)}).catch(p=>{s(!1),I(p)})};return d.exports.useEffect(()=>{(async()=>{await N.get(`/select_document/${t}`).then(r=>{let h=r.data;h.emission=w(A(h.emission),"dd/MM/yyyy"),h.due_date&&(h.due_date=w(A(h.due_date),"dd/MM/yyyy")),c(h),s(!1)}).catch(r=>{s(!1),I(r)})})()},[]),d.exports.useEffect(()=>{$("#code").mask(X)},[]),a?e(U,{}):n("div",{className:D.formsuccessNewDocumentBox,children:[n("div",{className:D.contentTitle,children:[e("h2",{children:"Documento"}),n("span",{children:["Inclua impostos, altere os dados fornecidos, adicione documentos gerados no SIAFI como ",e("strong",{children:"(NS, NP, NE, OB, ...)"})]})]}),n("div",{className:D.contentResponseData,children:[n("div",{className:D.contentTextBox,children:[e("span",{children:"C\xF3digo Credor"}),n("div",{className:D.contentText,children:[e(q,{color:"#4C5948"}),e("span",{id:"code",children:o==null?void 0:o.creditor.code})]})]}),n("div",{className:D.contentTextBox,children:[e("span",{children:"Raz\xE3o Credor"}),n("div",{className:D.contentText,children:[e(q,{color:"#4C5948"}),e("span",{children:o==null?void 0:o.creditor.name})]})]}),n("div",{className:D.contentTextBox,children:[e("span",{children:"N\xFAmero Documento"}),n("div",{className:D.contentText,children:[e(q,{color:"#4C5948"}),e("span",{children:o==null?void 0:o.number})]})]}),n("div",{className:D.contentBoxDataDobleText,children:[n("div",{className:D.contentTextBox,children:[e("span",{children:"Emiss\xE3o"}),n("div",{className:D.contentText,children:[e(q,{color:"#4C5948"}),e("span",{children:o==null?void 0:o.emission})]})]}),(o==null?void 0:o.due_date)&&n("div",{className:D.contentTextBox,children:[e("span",{children:"Vencimento"}),n("div",{className:D.contentText,children:[e(q,{color:"#4C5948"}),e("span",{children:o==null?void 0:o.due_date})]})]})]}),n("div",{className:D.contentTextBox,children:[e("span",{children:"Valor"}),n("div",{className:D.contentText,children:[e(q,{color:"#4C5948"}),e("span",{children:z(o==null?void 0:o.value)})]})]}),n("div",{className:D.contentBoxButton,children:[e("button",{type:"button",onClick:()=>l(-1),children:e("span",{children:"Voltar"})}),e("button",{type:"button",onClick:()=>l(`/financial/document/update/${t}`),children:e("span",{children:"Editar"})}),e("button",{type:"button",onClick:()=>l(`/financial/document/taxes/${t}`),children:e("span",{children:"Impostos"})}),e("button",{type:"button",children:e("span",{children:"DOC SIAFI"})})]})]}),e("div",{className:D.contentAuthorBox,children:e("div",{className:D.contentAuthorTextBox,children:e("div",{className:D.contentAuthorText,children:o==null?void 0:o.units.map(p=>n("span",{children:["Criado em ",e("strong",{children:w(A(p.included_in),"dd/MM/yyyy 'as' HH:mm:ss")})," por ",e("strong",{children:p.user.name})," (",e("strong",{children:p.user.email}),")"]},p.included_in))})})}),e("button",{type:"button",className:D.deleteButton,onClick:()=>m(),children:e("span",{children:"Excluir"})})]})},St="_formDocumentBox_1xcwq_1",wt="_contentTitleForm_1xcwq_15",At="_contentTitleText_1xcwq_21",Rt="_contentInputBox_1xcwq_48",kt="_contentDoubleInputBox_1xcwq_55",Mt="_contentBox_1xcwq_62",$t="_contentButton_1xcwq_102";var F={formDocumentBox:St,contentTitleForm:wt,contentTitleText:At,contentInputBox:Rt,contentDoubleInputBox:kt,contentBox:Mt,contentButton:$t};const qt=()=>{const[a,s]=d.exports.useState(!1),[o,c]=d.exports.useState(""),{register:t,handleSubmit:l,formState:{errors:m},reset:p,setValue:r}=G(),h=M(),_=i=>{s(!0),i.value=H(i.value),i.due_date===""&&delete i.due_date,N.post("/document",i).then(g=>{const{id:v}=g.data;p(),s(!1),h(`/financial/document/success/${v}`)}).catch(g=>{s(!1),I(g)})};d.exports.useEffect(()=>{$(".value").mask("#.##0,00",{reverse:!0}),$(".date").mask("00/00/0000")},[]);const S=async i=>{s(!0),await N.post("/select_creditor",{code:i}).then(g=>{var u;const{name:v}=g.data;c(""),r("name",v),s(!1),(u=document.getElementById("number"))==null||u.focus()}).catch(g=>{var u;const{data:v}=g.response;c(v.error),r("name",""),s(!1),(u=document.getElementById("name"))==null||u.focus()})};return n("div",{className:F.formDocumentBox,children:[a&&e(U,{}),e("div",{className:F.contentTitleForm,children:n("div",{className:F.contentTitleText,children:[e("h2",{children:"Cadastro de Documentos"}),e("span",{children:"[Nota Fiscal, Fatura]"})]})}),n("form",{onSubmit:l(_),autoComplete:"off",children:[n("div",{className:F.contentInputBox,children:[e("label",{children:"C\xF3digo Credor"}),e("input",W(f({onKeyPress:()=>c("")},t("code",{required:{value:!0,message:"preenchimento obrigat\xF3rio"},pattern:{value:/^[0-9]+$/i,message:"somente n\xFAmeros"},maxLength:{value:14,message:"m\xE1ximo 14 caracteres"},minLength:{value:6,message:"m\xEDnimo 6 caracteres"}})),{onBlur:i=>S(i.target.value)})),e(C,{errors:m,name:"code",render:({message:i})=>e("p",{children:i})})]}),n("div",{className:F.contentInputBox,children:[n("label",{htmlFor:"name",children:["Raz\xE3o Credor ",e("i",{children:o})]}),e("input",f({id:"name"},t("name")))]}),n("div",{className:F.contentInputBox,children:[e("label",{htmlFor:"number",children:"N\xFAmero Documento"}),e("input",f({id:"number"},t("number",{required:{value:!0,message:"preenchimento obrigat\xF3rio"},pattern:{value:/^[0-9]+$/i,message:"somente n\xFAmeros"}}))),e(C,{errors:m,name:"number",render:({message:i})=>e("p",{children:i})})]}),e("div",{className:F.contentInputBox,children:n("div",{className:F.contentDoubleInputBox,children:[n("div",{className:F.contentBox,children:[e("label",{children:"Emiss\xE3o"}),e("input",f({className:"date"},t("emission",{required:{value:!0,message:"preenchimento obrigat\xF3rio"},maxLength:{value:10,message:"m\xE1ximo 10 caracteres"},minLength:{value:10,message:"m\xEDnimo 10 caracteres"}}))),e(C,{errors:m,name:"emission",render:({message:i})=>e("p",{children:i})})]}),n("div",{className:F.contentBox,children:[e("label",{children:"Vencimento"}),e("input",f({className:"date"},t("due_date",{maxLength:{value:10,message:"m\xE1ximo 10 caracteres"},minLength:{value:10,message:"m\xEDnimo 10 caracteres"}}))),e(C,{errors:m,name:"due_date",render:({message:i})=>e("p",{children:i})})]})]})}),n("div",{className:F.contentInputBox,children:[e("label",{children:"Valor"}),e("input",f({className:"value"},t("value",{required:{value:!0,message:"preenchimento obrigat\xF3rio"}}))),e(C,{errors:m,name:"value",render:({message:i})=>e("p",{children:i})})]}),n("div",{className:F.contentButton,children:[e("button",{type:"button",onClick:()=>h(-1),children:e("span",{children:"Voltar"})}),e("button",{type:"submit",children:e("span",{children:"Cadastrar"})})]})]})]})},Ot="_formDocumentBox_ki8s5_1",Ut="_contentTitleForm_ki8s5_15",Vt="_contentTextBox_ki8s5_42",jt="_contentText_ki8s5_42",Pt="_contentInputBox_ki8s5_79",Wt="_contentDoubleInputBox_ki8s5_86",Gt="_contentBox_ki8s5_92",zt="_contentBoxButton_ki8s5_150";var L={formDocumentBox:Ot,contentTitleForm:Ut,contentTextBox:Vt,contentText:jt,contentInputBox:Pt,contentDoubleInputBox:Wt,contentBox:Gt,contentBoxButton:zt};const Ht=()=>{const{id:a}=K(),s=M(),[o,c]=d.exports.useState(!0),[t,l]=d.exports.useState(null),{register:m,handleSubmit:p,formState:{errors:r},reset:h,setValue:_}=G({defaultValues:{id:a}});d.exports.useEffect(()=>{(async()=>{await N.get(`/select_document/${a}`).then(g=>{let v=g.data;v.emission=w(A(v.emission),"dd/MM/yyyy"),v.due_date&&(v.due_date=w(A(v.due_date),"dd/MM/yyyy"),_("due_date",v.due_date)),l(v),_("number",v.number),_("emission",v.emission),_("value",Intl.NumberFormat("pt-BR",{minimumFractionDigits:2}).format(Number(v.value))),c(!1)}).catch(g=>{c(!1),I(g)})})()},[]);const S=async i=>{c(!0),i.value=H(i.value),i.due_date===""&&(i.due_date=null),await N.post("/document/update",i).then(()=>{h(),c(!1),s(-1)}).catch(g=>{c(!1),I(g)})};return d.exports.useEffect(()=>{$(".value").mask("#.##0,00",{reverse:!0}),$(".date").mask("00/00/0000"),$("#code").mask(X)}),n("div",{className:L.formDocumentBox,children:[o&&e(U,{}),n("div",{className:L.contentTitleForm,children:[e("h2",{children:"Alterar Documento"}),e("span",{children:"Edi\xE7\xE3o de documento"})]}),n("form",{onSubmit:p(S),autoComplete:"off",children:[n("div",{className:L.contentTextBox,children:[e("span",{children:"C\xF3digo Credor"}),n("div",{className:L.contentText,children:[e(q,{color:"#4C5948"}),e("span",{id:"code",children:t==null?void 0:t.creditor.code})]})]}),n("div",{className:L.contentTextBox,children:[e("span",{children:"Raz\xE3o Credor"}),n("div",{className:L.contentText,children:[e(q,{color:"#4C5948"}),e("span",{children:t==null?void 0:t.creditor.name})]})]}),n("div",{className:L.contentInputBox,children:[e("label",{htmlFor:"number",children:"N\xFAmero Documento"}),e("input",f({id:"number"},m("number",{required:{value:!0,message:"preenchimento obrigat\xF3rio"},pattern:{value:/^[0-9]+$/i,message:"somente n\xFAmeros"}}))),e(C,{errors:r,name:"number",render:({message:i})=>e("p",{children:i})})]}),e("div",{className:L.contentInputBox,children:n("div",{className:L.contentDoubleInputBox,children:[n("div",{className:L.contentBox,children:[e("label",{children:"Emiss\xE3o"}),e("input",f({className:"date"},m("emission",{required:{value:!0,message:"preenchimento obrigat\xF3rio"},maxLength:{value:10,message:"m\xE1ximo 10 caracteres"},minLength:{value:10,message:"m\xEDnimo 10 caracteres"}}))),e(C,{errors:r,name:"emission",render:({message:i})=>e("p",{children:i})})]}),n("div",{className:L.contentBox,children:[e("label",{children:"Vencimento"}),e("input",f({className:"date"},m("due_date",{maxLength:{value:10,message:"m\xE1ximo 10 caracteres"},minLength:{value:10,message:"m\xEDnimo 10 caracteres"}}))),e(C,{errors:r,name:"due_date",render:({message:i})=>e("p",{children:i})})]})]})}),n("div",{className:L.contentInputBox,children:[e("label",{children:"Valor"}),e("input",f({className:"value"},m("value",{required:{value:!0,message:"preenchimento obrigat\xF3rio"}}))),e(C,{errors:r,name:"value",render:({message:i})=>e("p",{children:i})})]}),n("div",{className:L.contentBoxButton,children:[e("button",{type:"submit",children:e("span",{children:"Confirmar"})}),e("button",{type:"button",onClick:()=>s(-1),children:e("span",{children:"Voltar"})})]})]})]})},Jt="_contentAlertExtractEmpty_1hn3y_1",Kt="_contentPageExtract_1hn3y_66",Qt="_cardDocument_1hn3y_75",Xt="_contentDataCreditorDocument_1hn3y_91",Yt="_textCreditorData_1hn3y_98",Zt="_contentDataDocument_1hn3y_125",en="_textDocumentData_1hn3y_132",tn="_tableTaxesOnDocument_1hn3y_149",nn="_textLiq_1hn3y_159",on="_textTotal_1hn3y_162";var E={contentAlertExtractEmpty:Jt,contentPageExtract:Kt,cardDocument:Qt,contentDataCreditorDocument:Xt,textCreditorData:Yt,break:"_break_1hn3y_113",contentDataDocument:Zt,textDocumentData:en,tableTaxesOnDocument:tn,textLiq:nn,textTotal:on};const an=()=>{const[a,s]=d.exports.useState(!0),[o,c]=d.exports.useState([]),t=JSON.parse(localStorage.getItem("@financeiro:selectedDocuments")),l=M();return d.exports.useEffect(()=>{(async()=>{await N.post("/documents/filter",{id_documents:t}).then(p=>{const{data:r}=p;c(r),s(!1)}).catch(p=>{s(!1),I(p)})})()},[]),d.exports.useEffect(()=>{$(".code").mask(X)},[o]),n("div",{children:[a&&e(U,{}),t.length===0&&n("div",{className:E.contentAlertExtractEmpty,children:[e(pe,{size:48,color:"#915ce6"}),e("h2",{children:"Aten\xE7\xE3o"}),e("h3",{children:"Selecione os documentos para impress\xE3o do extrato"}),e("button",{type:"button",onClick:()=>l("/financial/document/list"),children:e("span",{children:"Documentos"})})]}),ke(o,8).map((m,p)=>e("div",{className:E.contentPageExtract,children:m.map(r=>n("div",{className:E.cardDocument,onClick:()=>l(`/financial/document/success/${r.id}`),children:[e("div",{className:E.contentDataCreditorDocument,children:n("div",{className:E.textCreditorData,children:[e("span",{children:r.creditor.name}),e("span",{className:"code",children:r.creditor.code})]})}),e("div",{className:E.break}),n("div",{className:E.contentDataDocument,children:[n("div",{className:E.textDocumentData,children:[e("span",{children:"N\xFAmero"}),e("span",{children:r.number})]}),n("div",{className:E.textDocumentData,children:[e("span",{children:"Emiss\xE3o"}),e("span",{children:w(A(r.emission),"dd/MM/yyyy")})]}),r.due_date&&n("div",{className:E.textDocumentData,children:[e("span",{children:"Vencimento"}),e("span",{children:w(A(r.due_date),"dd/MM/yyyy")})]}),n("div",{className:E.textDocumentData,children:[e("span",{children:"Valor"}),e("span",{children:z(r.value)})]})]}),r.taxes&&r.taxes.length>0&&n("table",{className:E.tableTaxesOnDocument,children:[e("thead",{children:n("tr",{children:[e("th",{className:"bold",children:"C\xF3d"}),e("th",{className:"bold",children:"%"}),e("th",{className:"bold",children:"Calc"}),e("th",{className:"bold",children:"Valor"})]})}),n("tbody",{children:[r.taxes.map(h=>n("tr",{children:[e("td",{children:h.code}),e("td",{children:Intl.NumberFormat("pt-BR",{style:"percent",minimumFractionDigits:2}).format(h.p_a/100)}),n("td",{children:[" ",Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(h.calculation_basis)]}),e("td",{children:Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(h.amount)})]},h.amount)),n("tr",{className:E.textTotal,children:[e("td",{colSpan:2,children:"Total"}),e("td",{colSpan:2,children:(r==null?void 0:r.taxes)&&Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(r==null?void 0:r.taxes.reduce((h,_)=>h+=+_.amount,0))})]}),n("tr",{className:E.textLiq,children:[e("td",{colSpan:2,children:"L\xEDquido"}),e("td",{colSpan:2,children:Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(r.value-(r==null?void 0:r.taxes.reduce((h,_)=>h+=+_.amount,0)))})]})]})]})]},r.id))},p))]})},cn="_contentBoxTaxesOnDocument_jp2gq_1",sn="_contentTitleForm_jp2gq_16",rn="_contentTitle_jp2gq_16",ln="_contentDataDocument_jp2gq_42",dn="_boxCreditor_jp2gq_52",un="_toBreak_jp2gq_57",mn="_boxDocument_jp2gq_63",hn="_contentTaxesData_jp2gq_83",pn="_contentBoxData_jp2gq_123",xn="_contentTotal_jp2gq_148",_n="_contentFormTaxes_jp2gq_163",gn="_contentTaxesBoxInputs_jp2gq_180",vn="_contentInputBox_jp2gq_186",Dn="_contentBoxButton_jp2gq_246";var B={contentBoxTaxesOnDocument:cn,contentTitleForm:sn,contentTitle:rn,contentDataDocument:ln,boxCreditor:dn,toBreak:un,boxDocument:mn,contentTaxesData:hn,contentBoxData:pn,contentTotal:xn,contentFormTaxes:_n,contentTaxesBoxInputs:gn,contentInputBox:vn,contentBoxButton:Dn};const Bn=()=>{const{id:a}=K(),s=M(),[o,c]=d.exports.useState(!0),[t,l]=d.exports.useState(null),[m,p]=d.exports.useState(0),{register:r,handleSubmit:h,formState:{errors:_},reset:S,setValue:i}=G({defaultValues:{document_id:a}});d.exports.useEffect(()=>{c(!0),(async()=>{await N.get(`/select_document/${a}`).then(y=>{const{data:P}=y;l(P),i("calculation_basis",Intl.NumberFormat("pt-BR",{minimumFractionDigits:2}).format(P.value)),c(!1)}).catch(y=>{c(!1),I(y)})})()},[m]),d.exports.useEffect(()=>{$(".value").mask("#.##0,00",{reverse:!0})});const g=async u=>{c(!0),u.p_a=H(u.p_a),u.calculation_basis=H(u.calculation_basis),console.log(u.calculation_basis),await N.post("/taxes/document",u).then(()=>{S(),p(m+1),c(!1)}).catch(y=>{c(!1),p(m+1),I(y)})},v=async u=>{c(!0),await N.post("/taxe/remove/document",u).then(y=>{S(),p(m+1),c(!1)}).catch(y=>{c(!1),I(y)})};return n("div",{className:B.contentBoxTaxesOnDocument,children:[o&&e(U,{}),e("div",{className:B.contentTitleForm,children:n("div",{className:B.contentTitle,children:[e("h2",{children:"Gerir Documento"}),e("span",{children:"Dedu\xE7\xF5es | Descontos | Acr\xE9scimos"})]})}),n("div",{className:B.contentDataDocument,children:[n("div",{className:B.boxCreditor,children:[e("p",{children:t==null?void 0:t.creditor.name}),e("p",{children:t==null?void 0:t.creditor.code})]}),e("div",{className:B.toBreak}),n("div",{className:B.boxDocument,children:[n("p",{children:[e("span",{children:"Documento"})," ",t==null?void 0:t.number]}),n("p",{children:[e("span",{children:"Valor"})," ",(t==null?void 0:t.value)&&Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t==null?void 0:t.value)]}),e("p",{children:(t==null?void 0:t.taxes)&&t.taxes.length>0&&n(Q.Fragment,{children:[e("span",{children:"L\xEDquido"}),e("span",{children:Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t.value-(t==null?void 0:t.taxes.reduce((u,y)=>u+=+y.amount,0)))})]})})]})]}),(t==null?void 0:t.taxes)&&t.taxes.length>0&&n("div",{className:B.contentTaxesData,children:[n("div",{className:B.contentTitle,children:[e("span",{children:"C\xF3digo"}),e("span",{children:"%"}),e("span",{children:"C\xE1lculo"}),e("span",{children:"Total"})]}),e("div",{className:B.contentBoxData,children:t==null?void 0:t.taxes.map(u=>n("div",{onClick:()=>v({document_id:u.document_id,taxe_id:u.taxe_id}),children:[e("span",{children:u.code}),e("span",{children:Intl.NumberFormat("pt-BR",{style:"percent",minimumFractionDigits:2}).format(u.p_a/100)}),e("span",{children:Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(u.calculation_basis)}),e("span",{children:Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(u.amount)})]},u.amount))}),n("div",{className:B.contentTotal,children:[e("span",{children:"Total"}),e("span",{children:(t==null?void 0:t.taxes)&&Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t==null?void 0:t.taxes.reduce((u,y)=>u+=+y.amount,0))})]})]}),e("div",{className:B.contentFormTaxes,children:n("form",{onSubmit:h(g),autoComplete:"off",children:[n("div",{className:B.contentTaxesBoxInputs,children:[n("div",{className:B.contentInputBox,children:[e("label",{children:"C\xF3digo de Recolhimento DARF/DAR"}),e("input",f({},r("code",{required:{value:!0,message:"preenchimento obrigat\xF3rio"},minLength:{value:4,message:"4 caracteres"},maxLength:{value:4,message:"4 caracteres"}}))),e(C,{errors:_,name:"code",render:({message:u})=>e("p",{children:u})})]}),n("div",{className:B.contentInputBox,children:[e("label",{children:"Percentual Aplicado"}),e("input",f({className:"value"},r("p_a",{required:{value:!0,message:"preenchimento obrigat\xF3rio"},maxLength:{value:6,message:"6 caracteres ex: 100,00%"}}))),e(C,{errors:_,name:"p_a",render:({message:u})=>e("p",{children:u})})]})]}),n("div",{className:B.contentInputBox,children:[e("label",{children:"Base de C\xE1lculo"}),e("input",f({className:"value"},r("calculation_basis",{required:{value:!0,message:"preenchimento obrigat\xF3rio"}}))),e(C,{errors:_,name:"calculation_basis",render:({message:u})=>e("p",{children:u})})]}),n("div",{className:B.contentBoxButton,children:[e("button",{type:"button",onClick:()=>s(-1),children:e("span",{children:"VOLTAR"})}),e("button",{type:"submit",children:e("span",{children:"CADASTRAR"})})]})]})})]})},fn=()=>n(xe,{children:[e(R,{path:"/",element:e(qe,{})}),n(R,{path:"/financial",element:e(st,{}),children:[e(R,{path:"home",element:e(ye,{})}),n(R,{path:"document",element:e(Ve,{}),children:[e(R,{path:"new",element:e(qt,{})}),e(R,{path:"success/:id",element:e(Ft,{})}),e(R,{path:"update/:id",element:e(Ht,{})}),e(R,{path:"list",element:e(vt,{})}),e(R,{path:"taxes/:id",element:e(Bn,{})}),e(R,{path:"extract",element:e(an,{})})]})]})]}),bn=()=>e(Q.Fragment,{children:e(_e,{children:e(fn,{})})});ge.render(e(Q.StrictMode,{children:e(Me,{children:e(bn,{})})}),document.getElementById("root"));
